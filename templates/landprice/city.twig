{% extends 'layout.twig' %}
{% block title %}{{ title }}{% endblock %}
{% block price_target %}{{ price_target }}{% endblock %}
{% block content_link %}
    <li><a href="{{ base_url() }}/{{ prefecture }}">{{ prefecture }}</a></li>
    <li><a href="{{ base_url() }}/{{ prefecture }}/{{ city }}">{{ city }}</a></li>
{% endblock %}

{% block mapArea %}
    <div class="row">
        <div class="col s12 m12 l12">
            <div class="map-card">
                <div class="card">
                    <div class="card-image waves-effect waves-block waves-light">
                        <div id="map-canvas"></div>
                    </div>
                    <div class="card-content">
                        <a class="btn-floating activator btn-move-up waves-effect waves-light darken-2 right">
                            <i class="mdi-maps-pin-drop"></i>
                        </a>
                        <h4 class="card-title grey-text text-darken-4"><a href="#" class="grey-text text-darken-4">{{ prefecture }}/{{ city }}</a>
                        </h4>
                    </div>
                    <div class="card-reveal">
                        <span class="card-title grey-text text-darken-4">{{ prefecture }}/{{ city }} <i class="mdi-navigation-close right"></i></span>
                        <div id="postArea">
                            <span class="card-title grey-text text-darken-4">地価公示</span>
                            <table class="responsive-table">
                                <thead>
                                <th data-field="id">順位</th>
                                <th data-field="price">価格</th>
                                <th data-field="rate">前年比(%)</th>
                                <th data-field="place">住所表示</th>
                                <th data-field="station">最寄駅</th>
                                <th data-field="distance">駅から距離(m)</th>
                                <th data-field="structure">建物構造</th>
                                <th data-field="usage">利用現況</th>
                                <th data-field="cityPlan">用途地域</th>
                                </thead>
                                <tbody>
                                {% for price in postedPrices %}
                                    <tr>
                                        <td>{{ loop.index }}</td>
                                        <td>{{ price.price }}円/㎡</td>
                                        {% if price.changeRate != null %}
                                            <td>{{ price.changeRate }}%</td>
                                        {% else %}
                                            <td></td>
                                        {% endif %}
                                        <td>{{ price.address }}</td>
                                        <td>{{ price.station }}</td>
                                        <td>{{ price.distanceFromStation }}m</td>
                                        <td>{{ price.structure }}</td>
                                        <td>{{ price.currentUsage }}</td>
                                        <td>{{ price.cityPlan }}</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        <div id="surveyArea">
                            <span class="card-title grey-text text-darken-4">地価調査</span>
                            <table class="responsive-table">
                                <thead>
                                <th data-field="id">順位</th>
                                <th data-field="price">価格</th>
                                <th data-field="rate">前年比(%)</th>
                                <th data-field="place">住所表示</th>
                                <th data-field="station">最寄駅</th>
                                <th data-field="distance">駅から距離(m)</th>
                                <th data-field="structure">建物構造</th>
                                <th data-field="usage">利用現況</th>
                                <th data-field="cityPlan">用途地域</th>
                                </thead>
                                <tbody>
                                {% for price in surveyPrices %}
                                    <tr>
                                        <td>{{ loop.index }}</td>
                                        <td>{{ price.price }}円/㎡</td>
                                        {% if price.changeRate != null %}
                                            <td>{{ price.changeRate }}%</td>
                                        {% else %}
                                            <td></td>
                                        {% endif %}
                                        <td>{{ price.address }}</td>
                                        <td>{{ price.station }}</td>
                                        <td>{{ price.distanceFromStation }}m</td>
                                        <td>{{ price.structure }}</td>
                                        <td>{{ price.currentUsage }}</td>
                                        <td>{{ price.cityPlan }}</td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascript %}
    {{ parent() }}
    <script type="text/javascript" src="{{ base_url() }}/js/city.js"></script>
{% endblock %}